# Quadient Archive and Retrieval (QAR)

![Version: 0.2.5](https://img.shields.io/badge/Version-0.2.5-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 10.5.0.5](https://img.shields.io/badge/AppVersion-10.5.0.5-informational?style=flat-square)

## TL;DR

```bash
helm install test-release ./qar
```

## Introduction

This [Helm](https://helm.sh) chart installs the Quadient Archive & Retrieval (QAR) component services.

## Prerequisites

- Kubernetes 1.23+
- Helm 3.1+

## Installing the Chart

To install the chart with the release name `dev-release`:

```bash
cd charts
helm install dev-release ./qar
```

These commands deploy QAR in the [Kubernetes](https://kubernetes.io) cluster using the default configuration. The [Parameters](#parameters) section lists the parameters that can be configured during installation.

## Uninstalling the Chart

To uninstall/delete the `dev-release` deployment:

```bash
helm uninstall dev-release
```

The command removes all the Kubernetes components associated with the chart and deletes the release.

## Requirements

| Repository                         | Name                                                                         | Version |
| ---------------------------------- | ---------------------------------------------------------------------------- | ------- |
| oci://registry.sptcloud.com/charts | [oracledb](https://github.com/robertwtucker/spt-charts/tree/master/oracledb) | 0.1.1   |

## Parameters

| Key                                       | Type   | Default                                              | Description                                                                                                                                                                                                                                                                                                                              |
| ----------------------------------------- | ------ | ---------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| global.applicationName                    | string | `"qar"`                                              | Defines a unique name of an application within a Kubernetes namespace.                                                                                                                                                                                                                                                                   |
| global.arsload.enabled                    | bool   | `false`                                              | Defines whether to deploy an ARSLOAD server.                                                                                                                                                                                                                                                                                             |
| global.arsload.image.name                 | string | `"registry.sptcloud.com/qar/ondemand"`               | Defines the URL address of the ARSLOAD server image stored in a container repository.                                                                                                                                                                                                                                                    |
| global.arsload.image.pullPolicy           | string | `"IfNotPresent"`                                     | QAR REST API image pull policy \[Always\|IfNotPresent\].                                                                                                                                                                                                                                                                                 |
| global.arsload.image.tag                  | string | `"10.5.0.5-oracle-ubi-8.8-854"`                      | Overrides tag specified by the `appVersion` in the chart file.                                                                                                                                                                                                                                                                           |
| global.arsload.passwordOverride           | string | `""`                                                 | Defines (in plain text) the password of the CMOD ARSLOAD user (for batch-loading documents). If left undefined, the deployment will generate a random alphanumeric password. Use the 'passwordOverrideSource' variable to define the username using a Secret.                                                                            |
| global.arsload.passwordOverrideSource     | object | `{"secretKey":"","secretName":"","useSecret":false}` | Uses a Secret to define the password of the CMOD ARSLOAD user (for batch-loading documents).                                                                                                                                                                                                                                             |
| global.arsload.userOverride               | string | `""`                                                 | Defines (in plain text) the name of the CMOD ARSLOAD user (for batch-loading documents). If left undefined, the default user `admin` is used. Use the `userOverrideSource' variable to define the username using a Secret.                                                                                                               |
| global.arsload.userOverrideSource         | object | `{"secretKey":"","secretName":"","useSecret":false}` | Uses a Secret to define the CMOD ARSLOAD user (for batch-loading documents).                                                                                                                                                                                                                                                             |
| global.existingServiceAccount             | string | `""`                                                 | Enter the name of an existing service account to use. Otherwise, one will be created by default.                                                                                                                                                                                                                                         |
| global.fts.enabled                        | bool   | `false`                                              | Defines whether to enable Full-Text Search.                                                                                                                                                                                                                                                                                              |
| global.fts.image.name                     | string | `"registry.sptcloud.com/qar/ondemand-fts"`           | Defines the URL address of the FTS server image stored in a container repository.                                                                                                                                                                                                                                                        |
| global.fts.image.pullPolicy               | string | `"IfNotPresent"`                                     | FTS image pull policy \[Always\|IfNotPresent\].                                                                                                                                                                                                                                                                                          |
| global.fts.image.tag                      | string | `"10.5.0.5-ubi-8.8-854"`                             | Overrides tag specified by the `appVersion` in the chart file.                                                                                                                                                                                                                                                                           |
| global.fts.portOverride                   | string | `nil`                                                | Defines the port to run the FTS server on. If left undefined, the default port 8191 is used.                                                                                                                                                                                                                                             |
| global.imagePullSecrets                   | list   | `[]`                                                 | List of image repository pull secrets. Secrets must be manually created in the namespace. ref: [https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/](https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/) Example: imagePullSecrets: - name: myRegistryKeySecretName |
| global.navigator.enabled                  | bool   | `false`                                              | Defines whether to deploy a Content Navigator server. [Not Implemented Yet]                                                                                                                                                                                                                                                              |
| global.navigator.portOverride             | string | `nil`                                                | Defines the port to run the HTTP listener on. If left undefined, the default port 9080 is used. [Not Implemented Yet]                                                                                                                                                                                                                    |
| global.ondemand.db.engine                 | string | `"ORACLE"`                                           | Specifies the DBMS used by the Library Server \[DB2\|ORACLE\].                                                                                                                                                                                                                                                                           |
| global.ondemand.db.numSubServers          | int    | `10`                                                 | Determines the number of processes that CMOD starts on the library server to handle connections to the database. Specify a value that supports the peak number of concurrent database connections library server needs to handle.                                                                                                        |
| global.ondemand.db.passwordOverride       | string | `""`                                                 | Defines (in plain text) the password of the administrative user to be created in the Oracle database(s). If left undefined, the deployment will generate a random alphanumeric password. Use the 'passwordOverrideSource' variable to define the password using a Secret.                                                                |
| global.ondemand.db.passwordOverrideSource | object | `{"secretKey":"","secretName":"","useSecret":false}` | Uses a Secret to define the password of the administrative user to be created in the Oracle database(s).                                                                                                                                                                                                                                 |
| global.ondemand.db.tnsServiceName         | string | `""`                                                 | Defines the Oracle TNS service name for the CMOD database. If left undefined, the lower-cased `serverInstanceName` value is used.                                                                                                                                                                                                        |
| global.ondemand.db.userOverride           | string | `""`                                                 | Defines (in plain text) the name of the administrative user to be created in the oracled database(s). If left undefined, the default user `archive` is created. Use the `userOverrideSource' variable to define the username using a Secret.                                                                                             |
| global.ondemand.db.userOverrideSource     | object | `{"secretKey":"","secretName":"","useSecret":false}` | Uses a Secret to define the administrative user to be created in the Oracle database(s).                                                                                                                                                                                                                                                 |
| global.ondemand.image.name                | string | `"registry.sptcloud.com/qar/ondemand"`               | Defines the URL address of the QAR server image stored in a container repository.                                                                                                                                                                                                                                                        |
| global.ondemand.image.pullPolicy          | string | `"IfNotPresent"`                                     | QAR image pull policy \[Always\|IfNotPresent\].                                                                                                                                                                                                                                                                                          |
| global.ondemand.image.tag                 | string | `"10.5.0.5-oracle-ubi-8.8-854"`                      | Overrides tag specified by the `appVersion` in the chart file.                                                                                                                                                                                                                                                                           |
| global.ondemand.odInstanceName            | string | `"ARCHIVE"`                                          | Used in the header line of the `ars.ini` file to identify the name of the CMOD instance.                                                                                                                                                                                                                                                 |
| global.ondemand.passwordOverride          | string | `""`                                                 | Defines (in plain text) the password of the CMOD admin user. If left undefined, the deployment will generate a random alphanumeric password. Use the 'passwordOverrideSource' variable to define the password using a Secret.                                                                                                            |
| global.ondemand.passwordOverrideSource    | object | `{"secretKey":"","secretName":"","useSecret":false}` | Uses a Secret to define the password of the CMOD user.                                                                                                                                                                                                                                                                                   |
| global.ondemand.portOverride              | string | `nil`                                                | Defines the port to run the ARS listener on. If left undefined, the default port 1445 is used.                                                                                                                                                                                                                                           |
| global.ondemand.serverInstanceName        | string | `"ARCHIVE"`                                          | Identifies the name of the CMOD database (will be lower-cased for database creation). If not provided, the name `archive` will be used.                                                                                                                                                                                                  |
| global.ondemand.storageManager            | string | `"NO_TSM"`                                           | Determines whether the server program is linked to a cache-only storage manager or an archive storage manager. Required on library servers. \[TSM\|NO_TSM\|CACHE_ONLY\]                                                                                                                                                                  |
| global.ondemand.trace.enabled             | bool   | `false`                                              | Enables the system trace facility                                                                                                                                                                                                                                                                                                        |
| global.ondemand.userOverride              | string | `""`                                                 | Defines (in plain text) the name of the CMOD admin user. If left undefined, the default user `admin` is created. Use the `userOverrideSource' variable to define the username using a Secret.                                                                                                                                            |
| global.ondemand.userOverrideSource        | object | `{"secretKey":"","secretName":"","useSecret":false}` | Uses a Secret to define the CMOD admin user.                                                                                                                                                                                                                                                                                             |

| global.oracledb.emExpress.portOverride
